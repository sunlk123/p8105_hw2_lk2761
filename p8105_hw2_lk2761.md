p8105\_hw2\_lk2761
================
Lorraine Kwok
09/27/2019

## Problem 1

This problem uses the 2019 Mr. Trash Wheel dataset focusing on the data
for Mr. Trash wheel and precipitation in 2017 and 2018.

``` r
# import and clean Mr. Trash Wheel sheet 

trash_wheel_data = 
  read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
             sheet = 1, 
             range = cell_cols("A:N")) %>%
  janitor::clean_names(dat = .) %>%
  drop_na(data = ., dumpster) %>%
  mutate(.data = ., 
         sports_balls_rd = round(sports_balls, digits = 0),
         sports_balls_int = as.integer(sports_balls),
         homes_powered_rd = round(homes_powered, digits = 2)) %>%
  select(.data = ., -sports_balls, -sports_balls_rd, -homes_powered)
```

``` r
# import and clean 2017 precipitation data 

precip_2017 = 
  read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
             sheet = 6) %>%
  janitor::clean_names(dat = .) %>%
  rename(.data = ., month = precipitation_in, total_inches = x2) %>%
  filter(.data = ., month != "Month") %>%
  drop_na(data = .)  %>%
  mutate(.data = ., year = 2017) 
```

    ## New names:
    ## * `` -> ...2

``` r
# import and clean 2018 precipitation data

precip_2018 = 
   read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
             sheet = 5) %>%
  janitor::clean_names(dat = .) %>%
  rename(.data = ., month = precipitation_in, total_inches = x2) %>%
  filter(.data = ., month != "Month") %>%
  drop_na(data = .) %>%
  mutate(.data = ., year = 2018) 
```

    ## New names:
    ## * `` -> ...2

``` r
# create new dataset by combining precip_2017 and precip_2018

precip_combined = 
  bind_rows(precip_2017, precip_2018) %>%
  mutate(.data = ., 
         total_in = round(as.numeric(total_inches), digits = 2),
         month = month.name[as.numeric(month)]) %>%
  select(.data = ., year, month, total_in, -total_inches)
```

The Mr. Trash Wheel dataset consists of 344 observations. The mean
weight of trash removed by Mr. Trash Wheel in the Inner Harbor of
Baltimore, Maryland between May 2014 and June 2019 is 3.26 tons and the
mean volume is 15.54 cubic yards. The median number of sports balls
removed in 2017 was 8 balls. Data on precipitation in 2017 and 2018 were
combined into one dataset, which is made up of 24 observations. The
average amount of rainfall from January 2017 to December 2018 was 4.3
inches.

## Problem 2

We are now using the FiveThirtyEight data.

``` r
# create dataframe with polling data 
# In this dataset, for prez_gop, there were values of "2," which still resulted in coding of "0" in the prez_dem variable. 

pols_month_df =
  read.csv("./data/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names(dat = .) %>%
  separate(., mon, into = c("year", "month", "day")) %>%
  mutate(.data = .,
         prez_dem = recode(prez_dem, `1` = "dem", `0` = "gop"), 
         president = prez_dem,
         month = month.name[as.numeric(month)]) %>%
  select(.data = ., -prez_dem, -prez_gop, -day)
```

``` r
# import and clean S&P closing data 

snp_df =
  read.csv("./data/fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names(dat = .) %>%
  rename(.data = ., closing_values = close) %>%
  separate(., date, into = c("month", "day", "year")) %>% 
  select(.data = ., year, everything(), -day) %>%
  mutate(.data = ., month = month.name[as.numeric(month)])
```

``` r
# import and clean unemployment data

unemploy_df =
  read.csv("./data/fivethirtyeight_datasets/unemployment.csv") %>%
  janitor::clean_names(dat = .) 

# convert the months from rows to columns in the unemployment data frame

unemploy_data_col = 
  pivot_longer(
    unemploy_df,
    jan:dec,
    names_to = "month",
    values_to = "percent_unemploy")
  
# convert the abbreviated months to full names 

unemploy_tidy_data = 
  unemploy_data_col %>%
  mutate(.data = ., 
         month = recode(month, 
                        `jan` = "January", 
                        `feb` = "February",
                        `mar` = "March", 
                        `apr` = "April",
                        `may` = "May",
                        `jun` = "June",
                        `jul` = "July",
                        `aug` = "August",
                        `sep` = "September",
                       `oct` = "October",
                        `nov` = "November",
                        `dec` = "December"))
```

The following code chunk combines the three individual datasets, seen
above, together.

``` r
# merge pols_month_df and snp_df 

pol_snp_data =
  left_join(snp_df, pols_month_df, by = c("year", "month")) %>%
  mutate(.data = ., year = as.integer(year))

# merge unemploy_tidy_data into pols_snp_data 

pol_snp_unemploy_data =
  left_join(unemploy_tidy_data, pol_snp_data, by = c("year", "month"))
```

## Problem 3

We are using the NYC Popular Baby Names dataset.

``` r
# import Popular_Baby_Names csv and clean data 

baby_names_df = 
  read.csv("./data/Popular_Baby_Names.csv") %>%
  janitor::clean_names(dat = .) %>%
  rename(.data = ., child_first_name = child_s_first_name) %>%
  mutate(.data = ., 
         child_first_name = str_to_upper(child_first_name),
         ethnicity = recode(ethnicity, 
                            `ASIAN AND PACI` = "ASIAN AND PACIFIC ISLANDER",
                            `BLACK NON HISP` = "BLACK NON HISPANIC",
                            `WHITE NON HISP` = "WHITE NON HISPANIC")) %>%
  distinct(.data = ., .keep_all = FALSE)
```

Creating a reader-friendly table showing the rank in popularity of the
name “Olivia” as a female baby name over time

``` r
olivia_table = 
  baby_names_df %>%
  filter(.data = ., child_first_name == "OLIVIA") %>%
  pivot_wider(names_from = "year_of_birth",
              values_from = "ethnicity") %>%
  select(.data = ., child_first_name, rank, "2016", "2015", "2014", "2013", "2012", "2011", count, -gender)
```

``` r
male_pop_name = 
  baby_names_df %>%
  filter(.data = ., gender == "MALE", rank == "1") %>%
  select(.data = ., -gender) %>%
  pivot_wider(names_from = "year_of_birth",
              values_from = "child_first_name")
```

We will not create a scatterplot to display the data on the popularity
of first names for male, white non-hispanic children born in 2016

``` r
male_name_2016 = 
  baby_names_df %>%
  filter(.data = ., 
         year_of_birth == "2016" & 
         gender == "MALE" & 
         ethnicity == "WHITE NON HISPANIC")

ggplot(male_name_2016, aes(x = rank, y = count)) +
  geom_point()
```

![](p8105_hw2_lk2761_files/figure-gfm/create%20scatterplot-1.png)<!-- -->
